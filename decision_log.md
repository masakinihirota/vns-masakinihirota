# Decision Log

このファイルは、プロジェクトにおける重要な技術的決定、仕様変更、および設計の意図を記録するためのものです。
各種設計書（`.md`ファイル）が更新されるまでの間、このファイルが最新の決定事項の正（Single Source of Truth）となります。

## 2026-02-02

### ボーイスカウト（現状の監査とクリーンアップ）の実施

- **決定事項**: ルートディレクトリの一時ファイルおよびログファイルの整理。
- **理由**: ワークスペースをクリーンに保ち、開発効率を向上させるため。
- **削除ファイル**: `build.log`, `build_error.txt`, `lint_output.txt`, `lint_output_2.txt`, 重複した `pnpm-lock.yaml` ファイル。

## 2026-02-07

### トライアル版コンポーネントの依存関係ルールの緩和

- **決定事項**: `onboarding-trial` や `home-trial` などのトライアル版コンポーネントが、オリジナルの正規版コンポーネント（`onboarding-pc` や `home` など）に依存することを許可する。
- **理由**: トライアル版は正規版の機能の一部を利用する形態であり、開発効率向上とコード重複排除のため、厳密な疎結合ルールの例外とする。
- **反映先**: `.agent/rules/ファイル・ディレクトリ構成.md`

### Next.js 16 における Middleware の代替（proxy.ts の採用）

- **決定事項**: Next.js 16 環境においては `middleware.ts` を使用せず、`src/proxy.ts` を使用してリクエスト介入（プロキシ、ヘッダー操作、認証チェック等）を行う。
- **理由**: Next.js 16 の仕様変更およびユーザー指示により、`middleware.ts` が非推奨（またはプロジェクト方針として不採用）となり、`proxy.ts` が代替パターンとして採用されたため。
- **反映先**: 実装計画および今後の開発ルール。

## 2026-02-09

### マッチング機能のルート名のリファクタリング

- **決定事項**: `/auto-matching` を `/matching-auto` に、`/matching/manual` を `/matching-manual` に変更。
- **理由**: URL構造のフラット化と命名の統一（`matching-` プレフィックス）のため。
- **反映先**: `src/app/(protected)` 配下のディレクトリ名および各リンク参照。

### 開発者ダッシュボード（dev-dashboard）の整理と維持

- **決定事項**: 登録漏れしていたページ（作品管理リスト、マンダラチャート、ユーザーカード等）をダッシュボードに登録。また、不要な一時ファイル（`test_output.txt`等）を削除。
- **理由**: 開発状況の可視性を高め、ワークスペースをクリーンに保つため（ボーイスカウトルール）。
- **反映先**: `src/components/home-legacy/portal-dashboard/portal-dashboard.tsx`
