# タスクリスト (MVP フェーズ)

進捗記号: [ ] 未着手 / [~] 進行中 / [x] 完了 / [!] ブロック
優先度: 🔴 高 / 🟡 中 / 🟢 低

## サマリー
- 総タスク数: 46 (未着手ステータス含む)
- フェーズ: Phase 3 (タスクリスト作成 → Phase 4 移行準備)
- 次アクション: 基盤(TASK-001〜006) 着手 / 認証ギャップ(TASK-010,012,015) 対応開始

---
## 1. 🏗️ 基盤・インフラ (優先度: 🔴 高)
- [x] TASK-001: リポジトリ構成レビューと整備
  - 説明: 既存構成確認、不要ファイル/不足指示書確認、ワークスペース整合性確保
  - 成果物: 調整差分、README更新、改善提案メモ
  - テスト要件: なし(レビュー中心)
- [x] TASK-002: Biome 整合性チェック
  - 説明: Biome 単独運用。check は lint のみ。
  - 成果物: package.json scripts (lint / format / check) 整理, devDependencies 更新
  - テスト要件: `pnpm check` でエラーなし
- [ ] TASK-003: パッケージスクリプト/CI 下準備
  - 説明: lint / typecheck / test / build スクリプト統一
  - 成果物: package.json scripts、（必要なら）GitHub Actions 下書き
  - テスト要件: スクリプト実行結果
- [ ] TASK-004: Supabase 環境初期設定同期
  - 説明: ローカル supabase セットアップ手順整備・env 変数整理
  - 成果物: `.env.example`、セットアップドキュメント
  - テスト要件: ローカル起動確認ログ
- [ ] TASK-005: Drizzle ORM 初期マイグレーション整備
  - 説明: 既存 schema 確認、初期テーブル（users 基本）定義
  - 成果物: drizzle schema / migration、適用手順
  - テスト要件: マイグレーション適用成功ログ
- [ ] TASK-006: エラーハンドリング / ロギング方針草案
  - 説明: 共通エラー型・Sentry 連携方針
  - 成果物: エラー型定義、ガイドライン md
  - テスト要件: サンプルエラー送信確認

## 2. 🔐 認証 (優先度: 🔴 高)
- [ ] TASK-010: 認証要件再確認とギャップ分析
  - 説明: 要件定義/設計書と現状 (OAuth/匿名 実装済) の突合し不足洗い出し
  - 成果物: ギャップ一覧 md (メール/パスワード除外方針明記)
  - テスト要件: なし
- [x] TASK-011: OAuth/匿名 認証 UI 基本実装
  - 説明: Google / GitHub / 匿名ログインフォーム実装済み確認
  - 成果物: `oauth-*` 各フォーム, middleware リダイレクト
  - テスト要件: 後続で自動化予定 (TASK-018 へ委譲)
- [ ] TASK-012: セッション取得とユーザーコンテキスト Hook
  - 説明: Server Component / Client Hook (useCurrentUser) 実装（未実装なら追加）
  - 成果物: hooks ファイル、型定義
  - テスト要件: Hook のユニットテスト
- [ ] TASK-013: 認証ガード (ルート保護) 実装強化
  - 説明: middleware のパス例外整理 / Server Action 用ユーティリティ抽出
  - 成果物: middleware.ts 更新, guard util
  - テスト要件: 保護ルートの挙動テスト
- [ ] TASK-015: 匿名 → 正式アカウント昇格フロー設計
  - 説明: 匿名ユーザーのOAuth連携/属性移行手順定義 (メールパスワード無し方針)
  - 成果物: 昇格仕様 md, 必要な Supabase API 呼出シーケンス
  - テスト要件: 昇格シナリオモックテスト
- [ ] TASK-016: プロフィール初期プロビジョン自動化
  - 説明: 新規 (OAuth/匿名) 認証時 profile/root_accounts 同期
  - 成果物: server action or edge function, schema 同期コード
  - テスト要件: 新規ログイン後プロファイル存在確認テスト
- [ ] TASK-017: Auth エラーコード統一 & 表示指針
  - 説明: Supabase エラー→ユーザー向け/ログ向けマッピング
  - 成果物: error-map util, ドキュメント
  - テスト要件: 代表エラー変換テスト
- [ ] TASK-018: 認証テスト整備 (Unit/Integration)
  - 説明: middleware / hooks / フォーム 動作テスト
  - 成果物: vitest + RTL テストケース
  - テスト要件: CI で green


## 3. 👤 ユーザープロフィール (優先度: 🔴 高)
- [ ] TASK-020: プロフィール要件/設計再確認
  - 成果物: ギャップ/補足設計 md
- [ ] TASK-021: profiles テーブル定義 & マイグレーション
  - 成果物: schema/migration
  - テスト: 適用成功ログ
- [ ] TASK-022: プロフィール取得/更新 Server Action
  - 成果物: actions ファイル、Zod スキーマ
  - テスト: バリデーション & 正常系
- [ ] TASK-023: プロフィール編集 UI (基本項目)
  - 成果物: 編集フォーム
  - テスト: RTL で submit 成功/失敗
- [ ] TASK-024: アバター画像アップロード (Supabase Storage)
  - 成果物: upload util / UI
  - テスト: ストレージ API モック

## 4. 📦 作品登録 (優先度: 🟡 中)
- [ ] TASK-030: 作品テーブル設計レビュー
- [ ] TASK-031: 作品登録フォーム (基本メタデータ)
- [ ] TASK-032: ファイル/画像アップロード統合
- [ ] TASK-033: 一覧取得 Server Action + ページ
- [ ] TASK-034: 詳細表示 & 公開/下書き切替

## 5. 🤝 マッチング (優先度: 🟡 中)
- [ ] TASK-040: マッチング要件再整理 (MVP 範囲確定)
- [ ] TASK-041: マッチングアルゴリズム v1 仕様メモ
- [ ] TASK-042: 下書きアルゴリズム実装 (スコア関数)
- [ ] TASK-043: マッチ候補取得 API/Action
- [ ] TASK-044: マッチ結果表示 UI

## 6. 🏷️ タグ/リスト (優先度: 🟢 低)
- [ ] TASK-050: 公式タグ/ユーザータグ スキーマ初案
- [ ] TASK-051: タグ CRUD Action + UI 最小
- [ ] TASK-052: リスト機能 MVP 範囲定義
- [ ] TASK-053: リスト作成/参照 基本実装

## 7. 👥 グループ (優先度: 🟢 低)
- [ ] TASK-060: グループ要件再確認
- [ ] TASK-061: グループスキーマ/招待設計
- [ ] TASK-062: グループ作成 UI + Action

## 8. 🧪 テスト / 品質 (横断)
- [ ] TASK-070: Vitest/RTL 基盤セットアップ
- [ ] TASK-071: Storybook 初期設定 & 代表コンポーネント
- [ ] TASK-072: E2E テスト戦略メモ (Playwright 下書き)

## 9. 📚 ドキュメント / ナレッジ
- [ ] TASK-080: `.env.example` 整備 & 説明書
- [ ] TASK-081: アーキテクチャ概要図 (現状版)
- [ ] TASK-082: コーディング規約差分 (命名/設計指針) 反映

## 10. 🚀 デプロイ / 運用準備
- [ ] TASK-090: Vercel/Supabase デプロイ初回手順整備
- [ ] TASK-091: 監視(Sentry) 初期設定 & DSN 確認
- [ ] TASK-092: バックアップ/リストア手順メモ

---
生成後に各タスクへ詳細プロンプト ( `.github/_prompt/PROMPT-xxx.md` ) を段階的に追加してください。
