---
name: tech-debt
description: 技術的負債の解消。重複コードの検出・削除、デッドコードの整理、コードベースのクリーンアップ。
---

# 技術的負債の解消 (Tech Debt Cleanup)

このスキルは、コードベースを常にクリーンに保つために、重複コードの検出、不要なコードの削除、およびリファクタリングを支援します。

## 1. 重複コードの検出 (Duplication Detection)

- **構造的重複の特定**:
  - 同様のロジックを持つコンポーネントや関数を検索します。
  - `grep_search` や `find_by_name` を使用して、類似の名前やパターン（例: 同じ定数、同じ props 構造）を特定します。
- **共通化の提案**:
  - 3回以上繰り返されるロジックは、`src/lib/utils` や `src/hooks` 等に共通化することを検討します。
  - UIコンポーネントの重複は、`src/components/ui` 等の共有コンポーネントへの昇格を検討します。

## 2. 不要なコードの整理 (Dead Code Removal)

- **未使用のインポート・変数**:
  - リンターの警告や、ファイル内での使用箇所をスキャンして削除します。
- **コメントアウトされたコード**:
  - 「念のため残している」コードは、Gitの履歴にあることを前提に削除し、可読性を優先します。
- **デバッグ用ログ**:
  - 開発中に一時的に追加した `console.log` やデバッグ用フラグをクリーンアップします。

## 3. コードベースの整理 (Cleanup Workflow)

セッション終了時や大規模な変更の後に以下のチェックを実行します：

- [ ] **バレルファイルの整合性**: `index.ts` (Barrel Export) が最新の状態であり、不要な非公開要素が露出していないか確認します。
- [ ] **ディレクトリ構成の遵守**: 関連ファイルが同じディレクトリ（コロケーション）に正しく配置されているか確認します。
- [ ] **型定義の整理**: 重複した型定義や `any` の使用、不要な `export type` を整理します。

## 4. リファクタリング基準

- **関数の長さ**: 50行を超える関数は、責務を分割して小さな関数に切り出します。
- **ネストの深さ**: 3レベル以上のネストは、ガード節（Early Return）を使用して平坦化します。
- **命名の明確化**: 文脈が不明瞭な変数名（`data`, `items`, `list` 等）をより具体的な名前にリファクタリングします。

## 6. 再構築への移行基準 (Transition to Zero-Base)

既存のコードベースの負債があまりに大きく、リファクタリングによる改善が非効率であると判断した場合は、無理に継続せず [zero-base-refactoring](file:///u:/2026src/vns-masakinihirota.worktrees/anti/.agent/skills/zero-base-refactoring/SKILL.md) への移行を検討し、ユーザーに提案してください。

## 5. 実行方法

`/techdebt` コマンドを受け取った際、または自発的にクリーンアップが必要と判断した際に、このスキルを読み込み、現在のコードベースに対して上記の監査を実施します。
