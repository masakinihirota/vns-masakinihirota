---
trigger: always_on
description: テスト駆動開発での実装
---

テスト駆動開発を用いて開発をしてください。
それぞれテストファイルや生成ファイルをレビューしてから次のステップを行ってください。

# ワークスペース

### 2. 📁 ワークスペース指示書（機能開発タスク）

この指示書は、グローバル指示書に基づき、**特定のタスク**に対する具体的な要件とAIの作業手順を指示するものです。

#### 2.1 機能要件と仕様

  * **対象タスク:** [**細分化されたタスク名**を記入]
  * **親機能名:** [**上位機能名**を記入]
  * **メニュー順序:** [**数字**を記入]
  * **ルーティングパス:** `src/app/([メニュー順序]-[親機能名])/page.tsx`
  * **詳細要件:** [**このタスクで実現すべき具体的な動作、実装範囲、満たすべきテストシナリオ**を詳細に記述する]

#### 2.2 コロケーション構造の定義

このタスクが関わるコンポーネントは、以下のファイル構造内にて実装すること。

```
src/app/([順序]-[親機能名])/
├── page.tsx
├── components/
│   ├── [ComponentName]/
│   │   ├── [ComponentName].tsx        # コンポーネント本体 (UI/表示)
│   │   ├── [ComponentName].logic.ts   # ビジネスロジック/カスタムフック
│   │   ├── [ComponentName].fetch.ts   # データフェッチロジック
│   │   └── [ComponentName].test.tsx   # テストコード (TDDで最優先)

```

#### 2.3 TDD実行手順（AIへの依頼）

AIは、選択した**細分化タスク**を完了させるため、以下のRGRサイクルを順に実行すること。

##### 🔴 ステップ1: テストコードの生成（REDフェーズ）

1.  タスクの要件を満たすための**失敗するテストコード**を、該当する**テストファイル**（例: `[ComponentName].test.tsx`）に記述する。
2.  テストを実行し、**失敗（RED）すること**を確認する。

##### 🟢 ステップ2: アプリケーションコードの生成（GREENフェーズ）

1.  ステップ1で生成したテストを**すべて合格させる**ための**最小限のアプリケーションコード**を、対応するファイルに記述する。
2.  テストを再度実行し、\*\*すべてがグリーン（合格）\*\*になることを確認する。

##### ✨ ステップ3: リファクタリング（REFACTORフェーズ）

1.  テストがグリーンであることを前提に、生成したコードに対して**品質、可読性、効率**を高めるためのリファクタリングを提案・実行する。
2.  リファクタリング後、**テストが引き続きグリーン**であることを最終確認し、\*\*タスクを完了（チェック）\*\*とする。
