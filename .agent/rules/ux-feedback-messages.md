# やさしいエラーメッセージとフィードバック設計ガイドライン

高齢者やITに不慣れなユーザーは、システムのエラーメッセージに強く不安を感じます。
「何が起きたか」「どうすればいいか」を、専門用語を使わずに優しく伝えることをルール化します。

---

## 1. メッセージ記述ルール

### ① 専門用語の禁止（No Jargon）

ユーザーが理解できない技術用語は、一切使用しないでください。

| 開発用語 (NG)             | ユーザー向け表現 (OK)                                                    |
| :------------------------ | :----------------------------------------------------------------------- |
| Invalid Token             | ログイン有効期限が切れました。もう一度ログインしてください。             |
| 404 Not Found             | お探しのページは見つかりませんでした。                                   |
| 500 Internal Server Error | サーバー側で一時的な問題が発生しました。時間をおいて再試行してください。 |
| Validation Error          | 入力内容に間違いがあります。赤字の箇所をご確認ください。                 |

### ② 否定形より肯定・解決策を

「できません」「失敗しました」だけで終わらせず、**「どうすればよいか」**を必ずセットで提示します。

- **NG:** 保存に失敗しました。
- **OK:** 保存できませんでした。通信環境の良い場所で、もう一度「保存」ボタンを押してください。

### ③ 威圧感を与えない（Tone & Voice）

- 記号の乱用（「！！」「×」）や、強すぎる赤色のベタ塗りは避ける。
- 丁寧語（「～です」「～ます」）で統一する。

---

## 2. 視覚的フィードバックの義務化

ユーザーの操作に対して、システムが反応していることを視覚的に伝えます。
特に高齢者は、反応がないと「押せていない」と思って何度も連打してしまう傾向があります。

### ① ローディング表現 (Loading State)

通信や処理が発生する場合、必ずローディングインジケータを表示してください。

- **ボタン:** `disabled` 状態にし、スピナー（くるくる）を表示する。
- **画面全体:** 読み込み中はスケルトンスクリーンまたは読み込み中メッセージを表示する。

### ② 成功/失敗の明示 (Toast/Banner)

操作完了時は、画面遷移するしないに関わらず、必ずフィードバックを返します。

- **成功時:** 緑色や青色のトーストで「保存しました」「送信しました」と表示し、数秒後に消す。
- **失敗時:** 赤色やオレンジ色のメッセージを表示し、**ユーザーが閉じるまで消さない（読み飛ばし防止）。**

---

## 3. 実装パターン (Next.js/React)

### React Hook Form + Zod

バリデーションエラーは、フォーム送信時ではなく、フォーカスが外れたタイミング（onBlur）や入力中（onChange）にリアルタイムでフィードバックすることを推奨します。

```tsx
// 推奨: Input直下に平易な日本語でエラーを表示
<p className="text-red-700 font-medium mt-1 flex items-center">
  <AlertCircle className="w-4 h-4 mr-1" />
  メールアドレスの形式で入力してください（例: taro@example.com）
</p>
```

### Try-Catch エラーハンドリング

API呼び出しのエラーハンドリングでは、エラーコードに応じたマップを用意し、デフォルトエラーメッセージを表示させないようにします。

```typescript
// エラーメッセージ変換ユーティリティの使用を推奨
const getUserFriendlyError = (error: unknown) => {
  if (isNetworkError(error)) return "インターネットにつながっていません。接続を確認してください。";
  if (isUnauthorized(error)) return "ログイン画面に戻ります。もう一度ログインしてください。";
  return "一時的な問題が発生しました。しばらく待ってからもう一度お試しください。";
};
```
