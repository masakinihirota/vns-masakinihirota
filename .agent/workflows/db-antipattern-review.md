---
description: DBアンチパターンチェック（全25項目）を実行する
---

# DB Antipattern Review Workflow

このワークフローは、現在のコードベース（指定されたファイルまたはディレクトリ）に対して、`db-antipattern-review` スキルを使用したレビューを実行します。

## 手順

1.  **対象の特定**: ユーザーが指定したファイル、または最近変更されたDB関連ファイル（`schema.sql`, `migrations/`, `types/database.ts` 等）を特定します。
2.  **スキル参照**: `.agent/skills/db-antipattern-review/SKILL.md` を参照し、定義されている **全25項目のアンチパターン** を読み込みます。
3.  **レビュー実行**: 特定されたファイルに対してレビューを行い、以下の4つのカテゴリ、計25項目すべてについてチェックを実施します。
    - **I. 論理設計**: ジェイウォーク、ナイーブツリー、IDリクワイアド、キーレスエントリ、EAV、ポリモーフィック関連、マルチカラムアトリビュート、メタデータトリブル
    - **II. 物理設計**: ラウンディングエラー、サーティワンフレーバー、ファントムファイル、インデックスショットガン
    - **III. クエリ**: フィア・オブ・ジ・アンノウン、アンビギュアスグループ、ランダムセレクション、プアマンズサーチエンジン、スパゲッティクエリ、インプリシットカラム
    - **IV. アプリケーション開発**: リーダブルパスワード、SQLインジェクション、シュードキー・ニートフリーク、シー・ノー・エビル、ディプロマティック・イミュニティ、SOP、外部キーの誤用
4.  **レポート作成**: 検出された問題（重大度・場所・修正案）と、良好な点を含めたレポートを出力します。

## 実行コマンド例

- `/db-antipattern-review` : 全体の簡易チェック
- `/db-antipattern-review migrations/` : マイグレーションファイルのチェック
